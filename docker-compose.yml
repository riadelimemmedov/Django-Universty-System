version: '3.10'

services: #the different images that will be running as containers
  university: #service name
    container_name: university #container name
    build: . #build the image for the universty from the dockerfile in parent directory
    command: sh -c "
                    python manage.py makemigrations && 
                    python manage.py migrate && 
                    python manage.py runserver 0.0.0.0:7000" #command directive passes the parameters to the service and they will be executed by the service.In this example,these are django commands which will be executed in container where django lives
    volumes: #preserve data generated by the running container
      - .:/riade/OneDrive/Desktop/universty_system_django
    ports: #service runnig port
      - "7000:7000"
    depends_on: #child container,whick integrated to inside universty container,work as a together
      - postgres-db
  
  postgres-db:
      image: postgres
      container_name: db
      env_file: .env
